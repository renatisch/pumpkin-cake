{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return _assertThisInitialized(self);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nimport EventEmitter from '@algolia/events';\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { createInsightsMiddleware } from \"../middlewares/createInsightsMiddleware.js\";\nimport { createMetadataMiddleware, isMetadataEnabled } from \"../middlewares/createMetadataMiddleware.js\";\nimport { createRouterMiddleware } from \"../middlewares/createRouterMiddleware.js\";\nimport index from \"../widgets/index/index.js\";\nimport createHelpers from \"./createHelpers.js\";\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, setIndexHelperState, isIndexWidget } from \"./utils/index.js\";\nimport version from \"./version.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\nfunction defaultCreateURL() {\n  return '#';\n}\n\n// this purposely breaks typescript's type inference to ensure it's not used\n// as it's used for a default parameter for example\n// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n  var _super = _createSuper(InstantSearch);\n  function InstantSearch(options) {\n    var _this;\n    _classCallCheck(this, InstantSearch);\n    _this = _super.call(this);\n\n    // prevent `render` event listening from causing a warning\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"renderState\", {});\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialResults\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n    _defineProperty(_assertThisInitialized(_this), \"sendEventToInsights\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"status\", 'idle');\n    _defineProperty(_assertThisInitialized(_this), \"error\", undefined);\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      var _this$mainHelper;\n      var shouldResetStatus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (!((_this$mainHelper = _this.mainHelper) !== null && _this$mainHelper !== void 0 && _this$mainHelper.hasPendingRequests())) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        if (shouldResetStatus) {\n          _this.status = 'idle';\n          _this.error = undefined;\n        }\n      }\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n      _this.emit('render');\n    }));\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", defer(function () {\n      var nextUiState = _this.mainIndex.getWidgetUiState({});\n      _this.middleware.forEach(function (_ref) {\n        var instance = _ref.instance;\n        instance.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    }));\n    _this.setMaxListeners(100);\n    var _options$indexName = options.indexName,\n      indexName = _options$indexName === void 0 ? '' : _options$indexName,\n      numberLocale = options.numberLocale,\n      _options$initialUiSta = options.initialUiState,\n      initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n      _options$routing = options.routing,\n      routing = _options$routing === void 0 ? null : _options$routing,\n      _options$insights = options.insights,\n      insights = _options$insights === void 0 ? false : _options$insights,\n      searchFunction = options.searchFunction,\n      _options$stalledSearc = options.stalledSearchDelay,\n      stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n      _options$searchClient = options.searchClient,\n      searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n      _options$insightsClie = options.insightsClient,\n      insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n      _options$onStateChang = options.onStateChange,\n      onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n    process.env.NODE_ENV === 'development' ? warning(insightsClient === null, \"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n    _this._initialResults = null;\n    if (searchFunction) {\n      process.env.NODE_ENV === 'development' ? warning(false, \"The `searchFunction` option is deprecated. Use `onStateChange` instead.\") : void 0;\n      _this._searchFunction = searchFunction;\n    }\n    _this.sendEventToInsights = noop;\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? {} : routing;\n      routerOptions.$$internal = true;\n      _this.use(createRouterMiddleware(routerOptions));\n    }\n\n    // This is the default middleware,\n    // any user-provided middleware will be added later and override this one.\n    if (insights) {\n      var insightsOptions = typeof insights === 'boolean' ? {} : insights;\n      insightsOptions.$$internal = true;\n      _this.use(createInsightsMiddleware(insightsOptions));\n    }\n    if (isMetadataEnabled()) {\n      _this.use(createMetadataMiddleware({\n        $$internal: true\n      }));\n    }\n    return _this;\n  }\n\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   */\n  _createClass(InstantSearch, [{\n    key: \"_isSearchStalled\",\n    get:\n    /**\n     * The status of the search. Can be \"idle\", \"loading\", \"stalled\", or \"error\".\n     */\n\n    /**\n     * The last returned error from the Search API.\n     * The error gets cleared when the next valid search response is rendered.\n     */\n\n    /**\n     * @deprecated use `status === 'stalled'` instead\n     */\n    function get() {\n      process.env.NODE_ENV === 'development' ? warning(false, \"`InstantSearch._isSearchStalled` is deprecated and will be removed in InstantSearch.js 5.0.\\n\\nUse `InstantSearch.status === \\\"stalled\\\"` instead.\") : void 0;\n      return this.status === 'stalled';\n    }\n  }, {\n    key: \"use\",\n    value: function use() {\n      var _this2 = this;\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = _objectSpread({\n          $$type: '__unknown__',\n          $$internal: false,\n          subscribe: noop,\n          started: noop,\n          unsubscribe: noop,\n          onStateChange: noop\n        }, fn({\n          instantSearchInstance: _this2\n        }));\n        _this2.middleware.push({\n          creator: fn,\n          instance: newMiddleware\n        });\n        return newMiddleware;\n      });\n\n      // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n          m.started();\n        });\n      }\n      return this;\n    }\n\n    /**\n     * Removes a middleware from the InstantSearch lifecycle.\n     */\n  }, {\n    key: \"unuse\",\n    value: function unuse() {\n      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        middlewareToUnuse[_key2] = arguments[_key2];\n      }\n      this.middleware.filter(function (m) {\n        return middlewareToUnuse.includes(m.creator);\n      }).forEach(function (m) {\n        return m.instance.unsubscribe();\n      });\n      this.middleware = this.middleware.filter(function (m) {\n        return !middlewareToUnuse.includes(m.creator);\n      });\n      return this;\n    }\n\n    // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now\n  }, {\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : void 0;\n      return this.use.apply(this, arguments);\n    }\n\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      }\n\n      // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n      // In Vue InstantSearch' hydrate, a main helper gets set before start, so\n      // we need to respect this helper as a way to keep all listeners correct.\n      var mainHelper = this.mainHelper || algoliasearchHelper(this.client, this.indexName);\n      mainHelper.search = function () {\n        _this3.status = 'loading';\n        _this3.scheduleRender(false);\n        process.env.NODE_ENV === 'development' ? warning(Boolean(_this3.indexName) || _this3.mainIndex.getWidgets().some(isIndexWidget), 'No indexName provided, nor an explicit index widget in the widgets tree. This is required to be able to display results.') : void 0;\n\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n            _this3._mainHelperSearch();\n          });\n          // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n          searchFunctionHelper.on('change', function (_ref3) {\n            var state = _ref3.state;\n            mainIndexHelper.setState(state);\n          });\n          _this3._searchFunction(searchFunctionHelper);\n          return mainHelper;\n        };\n      }\n\n      // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n      mainHelper.on('error', function (_ref4) {\n        var error = _ref4.error;\n        if (!(error instanceof Error)) {\n          // typescript lies here, error is in some cases { name: string, message: string }\n          var err = error;\n          error = Object.keys(err).reduce(function (acc, key) {\n            acc[key] = err[key];\n            return acc;\n          }, new Error(err.message));\n        }\n        // If an error is emitted, it is re-thrown by events. In previous versions\n        // we emitted {error}, which is thrown as:\n        // \"Uncaught, unspecified \\\"error\\\" event. ([object Object])\"\n        // To avoid breaking changes, we make the error available in both\n        // `error` and `error.error`\n        // @MAJOR emit only error\n        error.error = error;\n        _this3.error = error;\n        _this3.status = 'error';\n        _this3.scheduleRender(false);\n\n        // This needs to execute last because it throws the error.\n        _this3.emit('error', error);\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (_ref5) {\n        var instance = _ref5.instance;\n        instance.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n      if (this._initialResults) {\n        var originalScheduleSearch = this.scheduleSearch;\n        // We don't schedule a first search when initial results are provided\n        // because we already have the results to render. This skips the initial\n        // network request on the browser on `start`.\n        this.scheduleSearch = defer(noop);\n        // We also skip the initial network request when widgets are dynamically\n        // added in the first tick (that's the case in all the framework-based flavors).\n        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely\n        // on our `defer` util to restore the original `scheduleSearch` value once\n        // widgets are added to hook back to the regular lifecycle.\n        defer(function () {\n          _this3.scheduleSearch = originalScheduleSearch;\n        })();\n      }\n      // We only schedule a search when widgets have been added before `start()`\n      // because there are listeners that can use these results.\n      // This is especially useful in framework-based flavors that wait for\n      // dynamically-added widgets to trigger a network request. It avoids\n      // having to batch this initial network request with the one coming from\n      // `addWidgets()`.\n      // Later, we could also skip `index()` widgets and widgets that don't read\n      // the results, but this is an optimization that has a very low impact for now.\n      else if (this.mainIndex.getWidgets().length > 0) {\n        this.scheduleSearch();\n      }\n\n      // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n      this.helper = this.mainIndex.getHelper();\n\n      // track we started the search if we add more widgets,\n      // to init them directly after add\n      this.started = true;\n      this.middleware.forEach(function (_ref6) {\n        var instance = _ref6.instance;\n        instance.started();\n      });\n    }\n\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _this$mainHelper2;\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose();\n\n      // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n      this.started = false;\n\n      // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n      this.removeAllListeners();\n      (_this$mainHelper2 = this.mainHelper) === null || _this$mainHelper2 === void 0 ? void 0 : _this$mainHelper2.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (_ref7) {\n        var instance = _ref7.instance;\n        instance.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4.status = 'stalled';\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n\n    /**\n     * Set the UI state and trigger a search.\n     * @param uiState The next UI state or a function computing it from the current state\n     * @param callOnStateChange private parameter used to know if the method is called from a state change\n     */\n  }, {\n    key: \"setUiState\",\n    value: function setUiState(uiState) {\n      var _this5 = this;\n      var callOnStateChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      }\n\n      // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n      this.mainIndex.refreshUiState();\n      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;\n      if (this.onStateChange && callOnStateChange) {\n        this.onStateChange({\n          uiState: nextUiState,\n          setUiState: function setUiState(finalUiState) {\n            setIndexHelperState(typeof finalUiState === 'function' ? finalUiState(nextUiState) : finalUiState, _this5.mainIndex);\n            _this5.scheduleSearch();\n            _this5.onInternalStateChange();\n          }\n        });\n      } else {\n        setIndexHelperState(nextUiState, this.mainIndex);\n        this.scheduleSearch();\n        this.onInternalStateChange();\n      }\n    }\n  }, {\n    key: \"getUiState\",\n    value: function getUiState() {\n      if (this.started) {\n        // We refresh the index UI state to make sure changes from `refine` are taken in account\n        this.mainIndex.refreshUiState();\n      }\n      return this.mainIndex.getWidgetUiState({});\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n  return InstantSearch;\n}(EventEmitter);\nexport default InstantSearch;","map":{"version":3,"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_toPropertyKey","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","value","_setPrototypeOf","o","p","setPrototypeOf","bind","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","EventEmitter","algoliasearchHelper","createInsightsMiddleware","createMetadataMiddleware","isMetadataEnabled","createRouterMiddleware","index","createHelpers","createDocumentationMessageGenerator","createDocumentationLink","defer","noop","warning","setIndexHelperState","isIndexWidget","version","withUsage","name","defaultCreateURL","InstantSearch","_EventEmitter","_super","options","_this","started","mainHelper","search","_this$mainHelper","shouldResetStatus","hasPendingRequests","clearTimeout","_searchStalledTimer","status","error","mainIndex","render","instantSearchInstance","emit","nextUiState","getWidgetUiState","middleware","_ref","onStateChange","uiState","setMaxListeners","_options$indexName","indexName","numberLocale","_options$initialUiSta","initialUiState","_options$routing","routing","_options$insights","insights","searchFunction","_options$stalledSearc","stalledSearchDelay","_options$searchClient","searchClient","_options$insightsClie","insightsClient","_options$onStateChang","Error","addAlgoliaAgent","concat","process","env","NODE_ENV","searchParameters","JSON","stringify","client","helper","templatesConfig","helpers","compileOptions","_stalledSearchDelay","_createURL","_initialUiState","_initialResults","_searchFunction","sendEventToInsights","routerOptions","$$internal","use","insightsOptions","get","_this2","_len","Array","_key","newMiddlewareList","map","fn","newMiddleware","$$type","subscribe","unsubscribe","creator","m","unuse","_len2","middlewareToUnuse","_key2","includes","EXPERIMENTAL_use","addWidget","widget","addWidgets","widgets","isArray","some","init","removeWidget","removeWidgets","dispose","start","_this3","scheduleRender","getWidgets","searchOnlyWithDerivedHelpers","fakeClient","Promise","_mainHelperSearch","mainIndexHelper","getHelper","searchFunctionHelper","state","once","_ref2","overrideStateWithoutTriggeringChangeEvent","on","_ref3","setState","_ref4","err","reduce","acc","message","_ref5","parent","originalScheduleSearch","scheduleSearch","_ref6","_this$mainHelper2","cancel","removeAllListeners","_ref7","scheduleStalledRender","_this4","setTimeout","setUiState","_this5","callOnStateChange","refreshUiState","finalUiState","onInternalStateChange","getUiState","createURL","nextState","refresh","clearCache"],"sources":["/Users/renat.ishmukhamedov/Documents/dev_projects/extractor/frontend/node_modules/instantsearch.js/es/lib/InstantSearch.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport EventEmitter from '@algolia/events';\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { createInsightsMiddleware } from \"../middlewares/createInsightsMiddleware.js\";\nimport { createMetadataMiddleware, isMetadataEnabled } from \"../middlewares/createMetadataMiddleware.js\";\nimport { createRouterMiddleware } from \"../middlewares/createRouterMiddleware.js\";\nimport index from \"../widgets/index/index.js\";\nimport createHelpers from \"./createHelpers.js\";\nimport { createDocumentationMessageGenerator, createDocumentationLink, defer, noop, warning, setIndexHelperState, isIndexWidget } from \"./utils/index.js\";\nimport version from \"./version.js\";\nvar withUsage = createDocumentationMessageGenerator({\n  name: 'instantsearch'\n});\nfunction defaultCreateURL() {\n  return '#';\n}\n\n// this purposely breaks typescript's type inference to ensure it's not used\n// as it's used for a default parameter for example\n// source: https://github.com/Microsoft/TypeScript/issues/14829#issuecomment-504042546\n/**\n * The actual implementation of the InstantSearch. This is\n * created using the `instantsearch` factory function.\n * It emits the 'render' event every time a search is done\n */\nvar InstantSearch = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(InstantSearch, _EventEmitter);\n  var _super = _createSuper(InstantSearch);\n  function InstantSearch(options) {\n    var _this;\n    _classCallCheck(this, InstantSearch);\n    _this = _super.call(this);\n\n    // prevent `render` event listening from causing a warning\n    _defineProperty(_assertThisInitialized(_this), \"client\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"indexName\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"insightsClient\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"onStateChange\", null);\n    _defineProperty(_assertThisInitialized(_this), \"helper\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"mainHelper\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"mainIndex\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"started\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"templatesConfig\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"renderState\", {});\n    _defineProperty(_assertThisInitialized(_this), \"_stalledSearchDelay\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_searchStalledTimer\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialUiState\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_initialResults\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_createURL\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_searchFunction\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_mainHelperSearch\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"middleware\", []);\n    _defineProperty(_assertThisInitialized(_this), \"sendEventToInsights\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"status\", 'idle');\n    _defineProperty(_assertThisInitialized(_this), \"error\", undefined);\n    _defineProperty(_assertThisInitialized(_this), \"scheduleSearch\", defer(function () {\n      if (_this.started) {\n        _this.mainHelper.search();\n      }\n    }));\n    _defineProperty(_assertThisInitialized(_this), \"scheduleRender\", defer(function () {\n      var _this$mainHelper;\n      var shouldResetStatus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (!((_this$mainHelper = _this.mainHelper) !== null && _this$mainHelper !== void 0 && _this$mainHelper.hasPendingRequests())) {\n        clearTimeout(_this._searchStalledTimer);\n        _this._searchStalledTimer = null;\n        if (shouldResetStatus) {\n          _this.status = 'idle';\n          _this.error = undefined;\n        }\n      }\n      _this.mainIndex.render({\n        instantSearchInstance: _assertThisInitialized(_this)\n      });\n      _this.emit('render');\n    }));\n    _defineProperty(_assertThisInitialized(_this), \"onInternalStateChange\", defer(function () {\n      var nextUiState = _this.mainIndex.getWidgetUiState({});\n      _this.middleware.forEach(function (_ref) {\n        var instance = _ref.instance;\n        instance.onStateChange({\n          uiState: nextUiState\n        });\n      });\n    }));\n    _this.setMaxListeners(100);\n    var _options$indexName = options.indexName,\n      indexName = _options$indexName === void 0 ? '' : _options$indexName,\n      numberLocale = options.numberLocale,\n      _options$initialUiSta = options.initialUiState,\n      initialUiState = _options$initialUiSta === void 0 ? {} : _options$initialUiSta,\n      _options$routing = options.routing,\n      routing = _options$routing === void 0 ? null : _options$routing,\n      _options$insights = options.insights,\n      insights = _options$insights === void 0 ? false : _options$insights,\n      searchFunction = options.searchFunction,\n      _options$stalledSearc = options.stalledSearchDelay,\n      stalledSearchDelay = _options$stalledSearc === void 0 ? 200 : _options$stalledSearc,\n      _options$searchClient = options.searchClient,\n      searchClient = _options$searchClient === void 0 ? null : _options$searchClient,\n      _options$insightsClie = options.insightsClient,\n      insightsClient = _options$insightsClie === void 0 ? null : _options$insightsClie,\n      _options$onStateChang = options.onStateChange,\n      onStateChange = _options$onStateChang === void 0 ? null : _options$onStateChang;\n    if (searchClient === null) {\n      throw new Error(withUsage('The `searchClient` option is required.'));\n    }\n    if (typeof searchClient.search !== 'function') {\n      throw new Error(\"The `searchClient` must implement a `search` method.\\n\\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/\");\n    }\n    if (typeof searchClient.addAlgoliaAgent === 'function') {\n      searchClient.addAlgoliaAgent(\"instantsearch.js (\".concat(version, \")\"));\n    }\n    process.env.NODE_ENV === 'development' ? warning(insightsClient === null, \"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\\n\\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/\") : void 0;\n    if (insightsClient && typeof insightsClient !== 'function') {\n      throw new Error(withUsage('The `insightsClient` option should be a function.'));\n    }\n    process.env.NODE_ENV === 'development' ? warning(!options.searchParameters, \"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\\n\\nYou can replace it with the `configure` widget:\\n\\n```\\nsearch.addWidgets([\\n  configure(\".concat(JSON.stringify(options.searchParameters, null, 2), \")\\n]);\\n```\\n\\nSee \").concat(createDocumentationLink({\n      name: 'configure'\n    }))) : void 0;\n    _this.client = searchClient;\n    _this.insightsClient = insightsClient;\n    _this.indexName = indexName;\n    _this.helper = null;\n    _this.mainHelper = null;\n    _this.mainIndex = index({\n      indexName: indexName\n    });\n    _this.onStateChange = onStateChange;\n    _this.started = false;\n    _this.templatesConfig = {\n      helpers: createHelpers({\n        numberLocale: numberLocale\n      }),\n      compileOptions: {}\n    };\n    _this._stalledSearchDelay = stalledSearchDelay;\n    _this._searchStalledTimer = null;\n    _this._createURL = defaultCreateURL;\n    _this._initialUiState = initialUiState;\n    _this._initialResults = null;\n    if (searchFunction) {\n      process.env.NODE_ENV === 'development' ? warning(false, \"The `searchFunction` option is deprecated. Use `onStateChange` instead.\") : void 0;\n      _this._searchFunction = searchFunction;\n    }\n    _this.sendEventToInsights = noop;\n    if (routing) {\n      var routerOptions = typeof routing === 'boolean' ? {} : routing;\n      routerOptions.$$internal = true;\n      _this.use(createRouterMiddleware(routerOptions));\n    }\n\n    // This is the default middleware,\n    // any user-provided middleware will be added later and override this one.\n    if (insights) {\n      var insightsOptions = typeof insights === 'boolean' ? {} : insights;\n      insightsOptions.$$internal = true;\n      _this.use(createInsightsMiddleware(insightsOptions));\n    }\n    if (isMetadataEnabled()) {\n      _this.use(createMetadataMiddleware({\n        $$internal: true\n      }));\n    }\n    return _this;\n  }\n\n  /**\n   * Hooks a middleware into the InstantSearch lifecycle.\n   */\n  _createClass(InstantSearch, [{\n    key: \"_isSearchStalled\",\n    get:\n    /**\n     * The status of the search. Can be \"idle\", \"loading\", \"stalled\", or \"error\".\n     */\n\n    /**\n     * The last returned error from the Search API.\n     * The error gets cleared when the next valid search response is rendered.\n     */\n\n    /**\n     * @deprecated use `status === 'stalled'` instead\n     */\n    function get() {\n      process.env.NODE_ENV === 'development' ? warning(false, \"`InstantSearch._isSearchStalled` is deprecated and will be removed in InstantSearch.js 5.0.\\n\\nUse `InstantSearch.status === \\\"stalled\\\"` instead.\") : void 0;\n      return this.status === 'stalled';\n    }\n  }, {\n    key: \"use\",\n    value: function use() {\n      var _this2 = this;\n      for (var _len = arguments.length, middleware = new Array(_len), _key = 0; _key < _len; _key++) {\n        middleware[_key] = arguments[_key];\n      }\n      var newMiddlewareList = middleware.map(function (fn) {\n        var newMiddleware = _objectSpread({\n          $$type: '__unknown__',\n          $$internal: false,\n          subscribe: noop,\n          started: noop,\n          unsubscribe: noop,\n          onStateChange: noop\n        }, fn({\n          instantSearchInstance: _this2\n        }));\n        _this2.middleware.push({\n          creator: fn,\n          instance: newMiddleware\n        });\n        return newMiddleware;\n      });\n\n      // If the instance has already started, we directly subscribe the\n      // middleware so they're notified of changes.\n      if (this.started) {\n        newMiddlewareList.forEach(function (m) {\n          m.subscribe();\n          m.started();\n        });\n      }\n      return this;\n    }\n\n    /**\n     * Removes a middleware from the InstantSearch lifecycle.\n     */\n  }, {\n    key: \"unuse\",\n    value: function unuse() {\n      for (var _len2 = arguments.length, middlewareToUnuse = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        middlewareToUnuse[_key2] = arguments[_key2];\n      }\n      this.middleware.filter(function (m) {\n        return middlewareToUnuse.includes(m.creator);\n      }).forEach(function (m) {\n        return m.instance.unsubscribe();\n      });\n      this.middleware = this.middleware.filter(function (m) {\n        return !middlewareToUnuse.includes(m.creator);\n      });\n      return this;\n    }\n\n    // @major we shipped with EXPERIMENTAL_use, but have changed that to just `use` now\n  }, {\n    key: \"EXPERIMENTAL_use\",\n    value: function EXPERIMENTAL_use() {\n      process.env.NODE_ENV === 'development' ? warning(false, 'The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version.') : void 0;\n      return this.use.apply(this, arguments);\n    }\n\n    /**\n     * Adds a widget to the search instance.\n     * A widget can be added either before or after InstantSearch has started.\n     * @param widget The widget to add to InstantSearch.\n     *\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`.\n     */\n  }, {\n    key: \"addWidget\",\n    value: function addWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`') : void 0;\n      return this.addWidgets([widget]);\n    }\n\n    /**\n     * Adds multiple widgets to the search instance.\n     * Widgets can be added either before or after InstantSearch has started.\n     * @param widgets The array of widgets to add to InstantSearch.\n     */\n  }, {\n    key: \"addWidgets\",\n    value: function addWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `addWidgets` method expects an array of widgets. Please use `addWidget`.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.init !== 'function' && typeof widget.render !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `render` and/or an `init` method.'));\n      }\n      this.mainIndex.addWidgets(widgets);\n      return this;\n    }\n\n    /**\n     * Removes a widget from the search instance.\n     * @deprecated This method will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`\n     * @param widget The widget instance to remove from InstantSearch.\n     *\n     * The widget must implement a `dispose()` method to clear its state.\n     */\n  }, {\n    key: \"removeWidget\",\n    value: function removeWidget(widget) {\n      process.env.NODE_ENV === 'development' ? warning(false, 'removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`') : void 0;\n      return this.removeWidgets([widget]);\n    }\n\n    /**\n     * Removes multiple widgets from the search instance.\n     * @param widgets Array of widgets instances to remove from InstantSearch.\n     *\n     * The widgets must implement a `dispose()` method to clear their states.\n     */\n  }, {\n    key: \"removeWidgets\",\n    value: function removeWidgets(widgets) {\n      if (!Array.isArray(widgets)) {\n        throw new Error(withUsage('The `removeWidgets` method expects an array of widgets. Please use `removeWidget`.'));\n      }\n      if (widgets.some(function (widget) {\n        return typeof widget.dispose !== 'function';\n      })) {\n        throw new Error(withUsage('The widget definition expects a `dispose` method.'));\n      }\n      this.mainIndex.removeWidgets(widgets);\n      return this;\n    }\n\n    /**\n     * Ends the initialization of InstantSearch.js and triggers the\n     * first search. This method should be called after all widgets have been added\n     * to the instance of InstantSearch.js. InstantSearch.js also supports adding and removing\n     * widgets after the start as an **EXPERIMENTAL** feature.\n     */\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n      if (this.started) {\n        throw new Error(withUsage('The `start` method has already been called once.'));\n      }\n\n      // This Helper is used for the queries, we don't care about its state. The\n      // states are managed at the `index` level. We use this Helper to create\n      // DerivedHelper scoped into the `index` widgets.\n      // In Vue InstantSearch' hydrate, a main helper gets set before start, so\n      // we need to respect this helper as a way to keep all listeners correct.\n      var mainHelper = this.mainHelper || algoliasearchHelper(this.client, this.indexName);\n      mainHelper.search = function () {\n        _this3.status = 'loading';\n        _this3.scheduleRender(false);\n        process.env.NODE_ENV === 'development' ? warning(Boolean(_this3.indexName) || _this3.mainIndex.getWidgets().some(isIndexWidget), 'No indexName provided, nor an explicit index widget in the widgets tree. This is required to be able to display results.') : void 0;\n\n        // This solution allows us to keep the exact same API for the users but\n        // under the hood, we have a different implementation. It should be\n        // completely transparent for the rest of the codebase. Only this module\n        // is impacted.\n        return mainHelper.searchOnlyWithDerivedHelpers();\n      };\n      if (this._searchFunction) {\n        // this client isn't used to actually search, but required for the helper\n        // to not throw errors\n        var fakeClient = {\n          search: function search() {\n            return new Promise(noop);\n          }\n        };\n        this._mainHelperSearch = mainHelper.search.bind(mainHelper);\n        mainHelper.search = function () {\n          var mainIndexHelper = _this3.mainIndex.getHelper();\n          var searchFunctionHelper = algoliasearchHelper(fakeClient, mainIndexHelper.state.index, mainIndexHelper.state);\n          searchFunctionHelper.once('search', function (_ref2) {\n            var state = _ref2.state;\n            mainIndexHelper.overrideStateWithoutTriggeringChangeEvent(state);\n            _this3._mainHelperSearch();\n          });\n          // Forward state changes from `searchFunctionHelper` to `mainIndexHelper`\n          searchFunctionHelper.on('change', function (_ref3) {\n            var state = _ref3.state;\n            mainIndexHelper.setState(state);\n          });\n          _this3._searchFunction(searchFunctionHelper);\n          return mainHelper;\n        };\n      }\n\n      // Only the \"main\" Helper emits the `error` event vs the one for `search`\n      // and `results` that are also emitted on the derived one.\n      mainHelper.on('error', function (_ref4) {\n        var error = _ref4.error;\n        if (!(error instanceof Error)) {\n          // typescript lies here, error is in some cases { name: string, message: string }\n          var err = error;\n          error = Object.keys(err).reduce(function (acc, key) {\n            acc[key] = err[key];\n            return acc;\n          }, new Error(err.message));\n        }\n        // If an error is emitted, it is re-thrown by events. In previous versions\n        // we emitted {error}, which is thrown as:\n        // \"Uncaught, unspecified \\\"error\\\" event. ([object Object])\"\n        // To avoid breaking changes, we make the error available in both\n        // `error` and `error.error`\n        // @MAJOR emit only error\n        error.error = error;\n        _this3.error = error;\n        _this3.status = 'error';\n        _this3.scheduleRender(false);\n\n        // This needs to execute last because it throws the error.\n        _this3.emit('error', error);\n      });\n      this.mainHelper = mainHelper;\n      this.middleware.forEach(function (_ref5) {\n        var instance = _ref5.instance;\n        instance.subscribe();\n      });\n      this.mainIndex.init({\n        instantSearchInstance: this,\n        parent: null,\n        uiState: this._initialUiState\n      });\n      if (this._initialResults) {\n        var originalScheduleSearch = this.scheduleSearch;\n        // We don't schedule a first search when initial results are provided\n        // because we already have the results to render. This skips the initial\n        // network request on the browser on `start`.\n        this.scheduleSearch = defer(noop);\n        // We also skip the initial network request when widgets are dynamically\n        // added in the first tick (that's the case in all the framework-based flavors).\n        // When we add a widget to `index`, it calls `scheduleSearch`. We can rely\n        // on our `defer` util to restore the original `scheduleSearch` value once\n        // widgets are added to hook back to the regular lifecycle.\n        defer(function () {\n          _this3.scheduleSearch = originalScheduleSearch;\n        })();\n      }\n      // We only schedule a search when widgets have been added before `start()`\n      // because there are listeners that can use these results.\n      // This is especially useful in framework-based flavors that wait for\n      // dynamically-added widgets to trigger a network request. It avoids\n      // having to batch this initial network request with the one coming from\n      // `addWidgets()`.\n      // Later, we could also skip `index()` widgets and widgets that don't read\n      // the results, but this is an optimization that has a very low impact for now.\n      else if (this.mainIndex.getWidgets().length > 0) {\n        this.scheduleSearch();\n      }\n\n      // Keep the previous reference for legacy purpose, some pattern use\n      // the direct Helper access `search.helper` (e.g multi-index).\n      this.helper = this.mainIndex.getHelper();\n\n      // track we started the search if we add more widgets,\n      // to init them directly after add\n      this.started = true;\n      this.middleware.forEach(function (_ref6) {\n        var instance = _ref6.instance;\n        instance.started();\n      });\n    }\n\n    /**\n     * Removes all widgets without triggering a search afterwards. This is an **EXPERIMENTAL** feature,\n     * if you find an issue with it, please\n     * [open an issue](https://github.com/algolia/instantsearch.js/issues/new?title=Problem%20with%20dispose).\n     * @return {undefined} This method does not return anything\n     */\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var _this$mainHelper2;\n      this.scheduleSearch.cancel();\n      this.scheduleRender.cancel();\n      clearTimeout(this._searchStalledTimer);\n      this.removeWidgets(this.mainIndex.getWidgets());\n      this.mainIndex.dispose();\n\n      // You can not start an instance two times, therefore a disposed instance\n      // needs to set started as false otherwise this can not be restarted at a\n      // later point.\n      this.started = false;\n\n      // The helper needs to be reset to perform the next search from a fresh state.\n      // If not reset, it would use the state stored before calling `dispose()`.\n      this.removeAllListeners();\n      (_this$mainHelper2 = this.mainHelper) === null || _this$mainHelper2 === void 0 ? void 0 : _this$mainHelper2.removeAllListeners();\n      this.mainHelper = null;\n      this.helper = null;\n      this.middleware.forEach(function (_ref7) {\n        var instance = _ref7.instance;\n        instance.unsubscribe();\n      });\n    }\n  }, {\n    key: \"scheduleStalledRender\",\n    value: function scheduleStalledRender() {\n      var _this4 = this;\n      if (!this._searchStalledTimer) {\n        this._searchStalledTimer = setTimeout(function () {\n          _this4.status = 'stalled';\n          _this4.scheduleRender();\n        }, this._stalledSearchDelay);\n      }\n    }\n\n    /**\n     * Set the UI state and trigger a search.\n     * @param uiState The next UI state or a function computing it from the current state\n     * @param callOnStateChange private parameter used to know if the method is called from a state change\n     */\n  }, {\n    key: \"setUiState\",\n    value: function setUiState(uiState) {\n      var _this5 = this;\n      var callOnStateChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `setUiState`.'));\n      }\n\n      // We refresh the index UI state to update the local UI state that the\n      // main index passes to the function form of `setUiState`.\n      this.mainIndex.refreshUiState();\n      var nextUiState = typeof uiState === 'function' ? uiState(this.mainIndex.getWidgetUiState({})) : uiState;\n      if (this.onStateChange && callOnStateChange) {\n        this.onStateChange({\n          uiState: nextUiState,\n          setUiState: function setUiState(finalUiState) {\n            setIndexHelperState(typeof finalUiState === 'function' ? finalUiState(nextUiState) : finalUiState, _this5.mainIndex);\n            _this5.scheduleSearch();\n            _this5.onInternalStateChange();\n          }\n        });\n      } else {\n        setIndexHelperState(nextUiState, this.mainIndex);\n        this.scheduleSearch();\n        this.onInternalStateChange();\n      }\n    }\n  }, {\n    key: \"getUiState\",\n    value: function getUiState() {\n      if (this.started) {\n        // We refresh the index UI state to make sure changes from `refine` are taken in account\n        this.mainIndex.refreshUiState();\n      }\n      return this.mainIndex.getWidgetUiState({});\n    }\n  }, {\n    key: \"createURL\",\n    value: function createURL() {\n      var nextState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.started) {\n        throw new Error(withUsage('The `start` method needs to be called before `createURL`.'));\n      }\n      return this._createURL(nextState);\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.mainHelper) {\n        throw new Error(withUsage('The `start` method needs to be called before `refresh`.'));\n      }\n      this.mainHelper.clearCache().search();\n    }\n  }]);\n  return InstantSearch;\n}(EventEmitter);\nexport default InstantSearch;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}